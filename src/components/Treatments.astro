---
import { useTranslations, getLangFromUrl } from '../i18n/utils';
import { ArrowUpRight } from 'lucide-astro';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const treatments = [
  {
    icon: '/tratamientos dentales/ortodoncia-atm.svg',
    title: t('treatments.ortodoncia.title'),
    desc: t('treatments.ortodoncia.desc'),
    gradient: 'from-blue-50 to-indigo-50',
    accent: 'bg-blue-500',
    href: `/${lang === 'es' ? 'ortodoncia' : lang + '/ortodoncia'}`
  },
  {
    icon: '/tratamientos dentales/implantes-dentales.svg',
    title: t('treatments.implantes.title'),
    desc: t('treatments.implantes.desc'),
    gradient: 'from-indigo-50 to-violet-50',
    accent: 'bg-indigo-500',
    href: `/${lang === 'es' ? 'implantes-dentales' : lang + '/implantes-dentales'}`
  },
  {
    icon: '/tratamientos dentales/odontopediatria.svg',
    title: t('treatments.odontopediatria.title'),
    desc: t('treatments.odontopediatria.desc'),
    gradient: 'from-sky-50 to-cyan-50',
    accent: 'bg-sky-500',
    href: `/${lang === 'es' ? 'odontopediatria' : lang + '/odontopediatria'}`
  },
  {
    icon: '/tratamientos dentales/endodoncia.svg',
    title: t('treatments.endodoncia.title'),
    desc: t('treatments.endodoncia.desc'),
    gradient: 'from-slate-50 to-gray-50',
    accent: 'bg-slate-500',
    href: `/${lang === 'es' ? 'endodoncia' : lang + '/endodoncia'}`
  },
  {
    icon: '/tratamientos dentales/estetica-dental.svg',
    title: t('treatments.estetica.title'),
    desc: t('treatments.estetica.desc'),
    gradient: 'from-rose-50 to-pink-50',
    accent: 'bg-rose-500',
    href: `/${lang === 'es' ? 'estetica-dental' : lang + '/estetica-dental'}`
  },
  {
    icon: '/tratamientos dentales/rehabilitacion-oral.svg',
    title: t('treatments.rehabilitacion.title'),
    desc: t('treatments.rehabilitacion.desc'),
    gradient: 'from-amber-50 to-orange-50',
    accent: 'bg-amber-500',
    href: `/${lang === 'es' ? 'rehabilitacion-oral' : lang + '/rehabilitacion-oral'}`
  },
  {
    icon: '/tratamientos dentales/peridoncia.svg',
    title: t('treatments.periodoncia.title'),
    desc: t('treatments.periodoncia.desc'),
    gradient: 'from-emerald-50 to-green-50',
    accent: 'bg-emerald-500',
    href: `/${lang === 'es' ? 'periodoncia' : lang + '/periodoncia'}`
  },
  {
    icon: '/tratamientos dentales/cirugia-oral.svg',
    title: t('treatments.cirugia.title'),
    desc: t('treatments.cirugia.desc'),
    gradient: 'from-teal-50 to-cyan-50',
    accent: 'bg-teal-500',
    href: `/${lang === 'es' ? 'cirugia-oral' : lang + '/cirugia-oral'}`
  },
  {
    icon: '/tratamientos dentales/relleno-peribucal.svg',
    title: t('treatments.relleno.title'),
    desc: t('treatments.relleno.desc'),
    gradient: 'from-fuchsia-50 to-purple-50',
    accent: 'bg-fuchsia-500',
    href: `/${lang === 'es' ? 'armonia-orofacial' : lang + '/armonia-orofacial'}`
  }
];
---

<section id="treatments" class="section-padding bg-white relative overflow-hidden">
  <!-- Premium background -->
  <div class="absolute inset-0 bg-[radial-gradient(ellipse_at_top,rgba(37,99,235,0.03)_0%,transparent_60%)] pointer-events-none"></div>
  
  <div class="container mx-auto px-6 relative z-10">
    <!-- Section header -->
    <div class="flex flex-col md:flex-row md:items-end justify-between mb-20 fade-up">
      <div class="max-w-2xl">
        <span class="inline-block text-sm font-black uppercase tracking-[0.3em] text-accent mb-4">{t('treatments.services')}</span>
        <h2 class="text-4xl md:text-5xl lg:text-6xl leading-[1.05] tracking-tight">
          {t('treatments.title.main')}
        </h2>
      </div>
      <p class="text-slate-500 max-w-sm mt-6 md:mt-0 text-lg leading-relaxed">
        {t('treatments.desc.main')}
      </p>
    </div>

    <!-- Treatment grid -->
    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6 lg:gap-8">
      {treatments.map((item, index) => (
        <a href={item.href} class="fade-up group block" style={`transition-delay: ${index * 0.06}s`}>
          <article class="relative h-full p-8 lg:p-10 bg-white border border-slate-100/80 rounded-[2rem] overflow-hidden transition-all duration-500 hover:shadow-elevated hover:-translate-y-2 glow-border">
            <!-- Gradient accent corner -->
            <div class={`absolute top-0 right-0 w-40 h-40 bg-gradient-to-bl ${item.gradient} rounded-bl-[100px] -translate-y-12 translate-x-12 group-hover:scale-125 transition-transform duration-700 opacity-60`}></div>
            
            <!-- Accent line -->
            <div class={`absolute top-0 left-8 right-8 h-px ${item.accent} opacity-0 group-hover:opacity-40 transition-opacity duration-500`}></div>
            
            <div class="relative z-10 h-full flex flex-col">
              <div class="mb-8 p-4 bg-white shadow-card rounded-2xl w-fit inline-block group-hover:shadow-lg transition-shadow duration-500">
                <img src={item.icon} alt={item.title} class="w-12 h-12 grayscale group-hover:grayscale-0 transition-all duration-500" loading="lazy" decoding="async" width="48" height="48" />
              </div>
              
              <h3 class="text-xl font-black text-primary mb-3 tracking-tight group-hover:text-accent transition-colors duration-300">
                {item.title}
              </h3>
              <p class="text-slate-500 leading-relaxed mb-8 flex-grow text-[15px]">
                {item.desc}
              </p>
              
              <div class="flex items-center gap-2 text-sm font-black text-accent opacity-0 group-hover:opacity-100 transition-all duration-500 translate-y-3 group-hover:translate-y-0 uppercase tracking-wider">
                {t('treatments.more')} <ArrowUpRight size={14} class="group-hover:translate-x-0.5 group-hover:-translate-y-0.5 transition-transform" />
              </div>
            </div>
          </article>
        </a>
      ))}
    </div>
  </div>
</section>
